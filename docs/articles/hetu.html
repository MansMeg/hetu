<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Finnish personal ID number data toolkit for R (hetu) • hetu</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Finnish personal ID number data toolkit for R (hetu)">
<meta property="og:description" content="hetu">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hetu</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/hetu.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropengov/hetu/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="hetu_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Finnish personal ID number data toolkit for R (hetu)</h1>
                        <h4 class="author">Pyry Kantanen, Jussi Paananen, Mans Magnusson, Leo Lahti</h4>
            
            <h4 class="date">2020-09-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropengov/hetu/blob/master/vignettes/hetu.Rmd"><code>vignettes/hetu.Rmd</code></a></small>
      <div class="hidden name"><code>hetu.Rmd</code></div>

    </div>

    
    
<p>The <strong>hetu R package</strong> provides tools to work with Finnish personal identity numbers.</p>
<p>Where possible, we have unified the syntax with <a href="https://github.com/rOpenGov/sweidnumbr">sweidnumbr</a>.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install the current devel version in R:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"ropengov/hetu"</span>)</pre></body></html></div>
<p>Test the installation by loading the library:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">hetu</span>)</pre></body></html></div>
<p>We also recommend setting the UTF-8 encoding:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/locales.html">Sys.setlocale</a></span>(<span class="kw">locale</span><span class="kw">=</span><span class="st">"UTF-8"</span>)</pre></body></html></div>
</div>
<div id="basic-information" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-information" class="anchor"></a>Basic information</h2>
<p>Finnish personal identification numbers (Finnish: henkilötunnus, hetu in short), are used to identify citizens. Hetu PIN consists of eleven characters: DDMMYYCZZZQ, where DDMMYY is the day, month and year of birth, C is the century marker, ZZZ is the individual number and Q is the control character.</p>
<p>Males have odd and females have even individual number. The control character is determined by dividing DDMMYYZZZ by 31 and using the remainder (modulo 31) to pick up the corresponding character from the string “0123456789ABCDEFHJKLMNPRSTUVWXY”. For example, if the remainder is 0, the control character is 0 and if the remainder is 12, the control character is C.</p>
<p>A valid individual number is between 002-899. Individual numbers 900-999 are not in normal use and are used only for temporary or artificial PINs. These temporary PINs are sometimes used in different organizations, such as insurance companies or hospitals, if the individual is not a Finnish citizen, a permanent resident or if the exact identity of the individual cannot be determined at the time. Artificial or temporary PINs are not intended for continuous, long term use and they are not usually accepted by PIN validity checking algorithms.</p>
<p>Temporary PINs provide similar information about individual’s birth date or sex as regular PINs. Temporary PINs can also be safely used for testing purposes, as such a number cannot be linked to any real person.</p>
</div>
<div id="personal-identification-number-hetu" class="section level2">
<h2 class="hasAnchor">
<a href="#personal-identification-number-hetu" class="anchor"></a>Personal identification number (HETU)</h2>
<p>The basic hetu function can be used to view information from a Finnish personal identification number. The data is outputted as a data frame.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">example_pin</span> <span class="kw">&lt;-</span> <span class="st">"111111-111C"</span>
<span class="fu"><a href="../reference/hetu.html">hetu</a></span>(<span class="no">example_pin</span>)
<span class="co">#&gt;          hetu  sex personal.number checksum       date day month year century</span>
<span class="co">#&gt; 1 111111-111C Male             111        C 1911-11-11  11    11 1911       -</span>
<span class="co">#&gt;   is.temp</span>
<span class="co">#&gt; 1   FALSE</span></pre></body></html></div>
<p>The output can be made prettier, for example by using knitr:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="fu"><a href="../reference/hetu.html">hetu</a></span>(<span class="no">example_pin</span>))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">hetu</th>
<th align="left">sex</th>
<th align="left">personal.number</th>
<th align="left">checksum</th>
<th align="left">date</th>
<th align="right">day</th>
<th align="right">month</th>
<th align="right">year</th>
<th align="left">century</th>
<th align="left">is.temp</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">111111-111C</td>
<td align="left">Male</td>
<td align="left">111</td>
<td align="left">C</td>
<td align="left">1911-11-11</td>
<td align="right">11</td>
<td align="right">11</td>
<td align="right">1911</td>
<td align="left">-</td>
<td align="left">FALSE</td>
</tr></tbody>
</table>
<p>The hetu function also accepts vectors with several identification numbers as input:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">example_pins</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"010101-0101"</span>, <span class="st">"111111-111C"</span>)
<span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="fu"><a href="../reference/hetu.html">hetu</a></span>(<span class="no">example_pins</span>))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">hetu</th>
<th align="left">sex</th>
<th align="left">personal.number</th>
<th align="left">checksum</th>
<th align="left">date</th>
<th align="right">day</th>
<th align="right">month</th>
<th align="right">year</th>
<th align="left">century</th>
<th align="left">is.temp</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">010101-0101</td>
<td align="left">Female</td>
<td align="left">010</td>
<td align="left">1</td>
<td align="left">1901-01-01</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1901</td>
<td align="left">-</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="left">111111-111C</td>
<td align="left">Male</td>
<td align="left">111</td>
<td align="left">C</td>
<td align="left">1911-11-11</td>
<td align="right">11</td>
<td align="right">11</td>
<td align="right">1911</td>
<td align="left">-</td>
<td align="left">FALSE</td>
</tr>
</tbody>
</table>
<p>The hetu function prints warning messages to the user if input vector contains invalid PINs.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="../reference/hetu.html">hetu</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"010101-0102"</span>, <span class="st">"111311-111C"</span>, <span class="st">"010101-0101"</span>))
<span class="co">#&gt; Warning in FUN(X[[i]], ...): Incorrect checksum character '2' in hetu</span>
<span class="co">#&gt; 010101-0102</span>
<span class="co">#&gt; Warning in FUN(X[[i]], ...): Invalid month in hetu 111311-111C</span>
<span class="co">#&gt; Warning in FUN(X[[i]], ...): Incorrect checksum character 'C' in hetu</span>
<span class="co">#&gt; 111311-111C</span>
<span class="co">#&gt;          hetu    sex personal.number checksum       date day month year century</span>
<span class="co">#&gt; 1 010101-0101 Female             010        1 1901-01-01   1     1 1901       -</span>
<span class="co">#&gt;   is.temp</span>
<span class="co">#&gt; 1   FALSE</span></pre></body></html></div>
<p>The validity of the PINs can also be determined by using the pin_ctrl function:</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="../reference/pin_ctrl.html">pin_ctrl</a></span>(<span class="st">"010101-0101"</span>) <span class="co"># TRUE/FALSE </span>
<span class="co">#&gt; [1] TRUE</span>
<span class="fu"><a href="../reference/pin_ctrl.html">pin_ctrl</a></span>(<span class="st">"010101-1010"</span>) <span class="co"># FALSE</span>
<span class="co">#&gt; Warning in hetu(pin, allow.temp = allow.temp): Incorrect checksum character '0'</span>
<span class="co">#&gt; in hetu 010101-1010</span>
<span class="co">#&gt; [1] FALSE</span></pre></body></html></div>
<div id="extracting-specific-information" class="section level3">
<h3 class="hasAnchor">
<a href="#extracting-specific-information" class="anchor"></a>Extracting specific information</h3>
<p>Information contained in the PIN can be extracted with a generic extract parameter. Valid values for extraction are <em>hetu</em>, <em>sex</em>, <em>personal.number</em>, <em>checksum</em>, <em>date</em>, <em>day</em>, <em>month</em>, <em>year</em>, <em>century</em> and <em>is.temp</em>.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="../reference/hetu.html">hetu</a></span>(<span class="no">example_pins</span>, <span class="kw">extract</span> <span class="kw">=</span> <span class="st">"sex"</span>)
<span class="co">#&gt; [1] "Female" "Male"</span>
<span class="fu"><a href="../reference/hetu.html">hetu</a></span>(<span class="no">example_pins</span>, <span class="kw">extract</span> <span class="kw">=</span> <span class="st">"checksum"</span>)
<span class="co">#&gt; [1] "1" "C"</span></pre></body></html></div>
<p>Some fields can be extracted with specialized functions. Extracting sex with pin_sex function:</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="../reference/pin_sex.html">pin_sex</a></span>(<span class="no">example_pins</span>)
<span class="co">#&gt; [1] Female Male  </span>
<span class="co">#&gt; Levels: Female Male</span></pre></body></html></div>
<p>Extracting age at current date and at a given date with pin_age function:</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="../reference/pin_age.html">pin_age</a></span>(<span class="no">example_pins</span>)
<span class="co">#&gt; [1] 119 108</span>
<span class="fu"><a href="../reference/pin_age.html">pin_age</a></span>(<span class="no">example_pins</span>, <span class="kw">date</span> <span class="kw">=</span> <span class="st">"2012-01-01"</span>)
<span class="co">#&gt; [1] 111 100</span></pre></body></html></div>
<p>Dates (birth dates) also have their own function, pin_date.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="fu"><a href="../reference/pin_date.html">pin_date</a></span>(<span class="no">example_pins</span>)
<span class="co">#&gt; [1] "1901-01-01" "1911-11-11"</span></pre></body></html></div>
</div>
<div id="artificial-and-temporary-personal-identification-numbers" class="section level3">
<h3 class="hasAnchor">
<a href="#artificial-and-temporary-personal-identification-numbers" class="anchor"></a>Artificial and temporary personal identification numbers</h3>
<p>The package functions can be made to accept artificial or temporary personal identification numbers.Artificial and temporary PINs can be used normally by allowing them through allow.temp parameter.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="no">example_temp_pin</span> <span class="kw">&lt;-</span> <span class="st">"010101A900R"</span>
<span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="fu"><a href="../reference/hetu.html">hetu</a></span>(<span class="no">example_temp_pin</span>, <span class="kw">allow.temp</span> <span class="kw">=</span> <span class="fl">TRUE</span>))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">hetu</th>
<th align="left">sex</th>
<th align="left">personal.number</th>
<th align="left">checksum</th>
<th align="left">date</th>
<th align="right">day</th>
<th align="right">month</th>
<th align="right">year</th>
<th align="left">century</th>
<th align="left">is.temp</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">010101A900R</td>
<td align="left">Female</td>
<td align="left">900</td>
<td align="left">R</td>
<td align="left">2001-01-01</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2001</td>
<td align="left">A</td>
<td align="left">TRUE</td>
</tr></tbody>
</table>
<p>A vector with regular and temporary PINs mixed together prints only regular PINs, if allow.temp is not set to TRUE. Automatic omitting of temporary PINs does not produce a visible error message and therefore users need to be cautious if they want to use temporary PINs.</p>
<p>If temporary PINs are not explicitly allowed and the input vector consists of temporary PINs only, the function will return an error.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">example_temp_pins</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"010101A900R"</span>, <span class="st">"010101-0101"</span>)
<span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="fu"><a href="../reference/hetu.html">hetu</a></span>(<span class="no">example_temp_pins</span>))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">hetu</th>
<th align="left">sex</th>
<th align="left">personal.number</th>
<th align="left">checksum</th>
<th align="left">date</th>
<th align="right">day</th>
<th align="right">month</th>
<th align="right">year</th>
<th align="left">century</th>
<th align="left">is.temp</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">010101-0101</td>
<td align="left">Female</td>
<td align="left">010</td>
<td align="left">1</td>
<td align="left">1901-01-01</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1901</td>
<td align="left">-</td>
<td align="left">FALSE</td>
</tr></tbody>
</table>
<p>When allow.temp is set to TRUE, all PINs are handled as if they were regular PINs.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="fu"><a href="../reference/hetu.html">hetu</a></span>(<span class="no">example_temp_pins</span>, <span class="kw">allow.temp</span> <span class="kw">=</span> <span class="fl">TRUE</span>))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">hetu</th>
<th align="left">sex</th>
<th align="left">personal.number</th>
<th align="left">checksum</th>
<th align="left">date</th>
<th align="right">day</th>
<th align="right">month</th>
<th align="right">year</th>
<th align="left">century</th>
<th align="left">is.temp</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">010101A900R</td>
<td align="left">Female</td>
<td align="left">900</td>
<td align="left">R</td>
<td align="left">2001-01-01</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2001</td>
<td align="left">A</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">010101-0101</td>
<td align="left">Female</td>
<td align="left">010</td>
<td align="left">1</td>
<td align="left">1901-01-01</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1901</td>
<td align="left">-</td>
<td align="left">FALSE</td>
</tr>
</tbody>
</table>
<p>Validation function pin_ctrl produces a FALSE for every artificial / temporary PIN, if they are not explicitly allowed.</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="fu"><a href="../reference/hetu.html">hetu</a></span>(<span class="no">example_temp_pins</span>)) <span class="co">#FALSE TRUE</span></pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">hetu</th>
<th align="left">sex</th>
<th align="left">personal.number</th>
<th align="left">checksum</th>
<th align="left">date</th>
<th align="right">day</th>
<th align="right">month</th>
<th align="right">year</th>
<th align="left">century</th>
<th align="left">is.temp</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">010101-0101</td>
<td align="left">Female</td>
<td align="left">010</td>
<td align="left">1</td>
<td align="left">1901-01-01</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1901</td>
<td align="left">-</td>
<td align="left">FALSE</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="fu"><a href="../reference/hetu.html">hetu</a></span>(<span class="no">example_temp_pins</span>, <span class="kw">allow.temp</span> <span class="kw">=</span> <span class="fl">TRUE</span>)) <span class="co">#TRUE TRUE</span></pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">hetu</th>
<th align="left">sex</th>
<th align="left">personal.number</th>
<th align="left">checksum</th>
<th align="left">date</th>
<th align="right">day</th>
<th align="right">month</th>
<th align="right">year</th>
<th align="left">century</th>
<th align="left">is.temp</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">010101A900R</td>
<td align="left">Female</td>
<td align="left">900</td>
<td align="left">R</td>
<td align="left">2001-01-01</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2001</td>
<td align="left">A</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">010101-0101</td>
<td align="left">Female</td>
<td align="left">010</td>
<td align="left">1</td>
<td align="left">1901-01-01</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1901</td>
<td align="left">-</td>
<td align="left">FALSE</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="generating-random-pins" class="section level2">
<h2 class="hasAnchor">
<a href="#generating-random-pins" class="anchor"></a>Generating random PINs</h2>
<p>Random PINs can be generated by using the rpin function.</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="fu"><a href="../reference/rpin.html">rpin</a></span>(<span class="kw">n</span> <span class="kw">=</span> <span class="fl">4</span>)
<span class="co">#&gt; [1] "230474-6150" "250902A8488" "100486-482D" "170312A593L"</span>
<span class="fu"><a href="../reference/rpin.html">rpin</a></span>(<span class="kw">n</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">start_date</span> <span class="kw">=</span> <span class="st">"1990-01-01"</span>, <span class="kw">end_date</span> <span class="kw">=</span> <span class="st">"2005-01-01"</span>)
<span class="co">#&gt; [1] "090391-836N" "160192-893N" "230199-8088" "030392-696J"</span></pre></body></html></div>
<p>The number of males in the generated sample can be changed with parameter p.male. Default is 0.4.</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="no">random_sample</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/rpin.html">rpin</a></span>(<span class="kw">n</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">p.male</span> <span class="kw">=</span> <span class="fl">0.8</span>)
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span>(<span class="no">random_sample</span>)
<span class="co">#&gt; random_sample</span>
<span class="co">#&gt; 110227-466P 111182-393T 201195-4947 211066-562S </span>
<span class="co">#&gt;           1           1           1           1</span></pre></body></html></div>
<p>The default proportion of artificial / temporary PINs is 0.0, meaning that no artificial / temporary PINs are generated by default.</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="no">temp_sample</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/rpin.html">rpin</a></span>(<span class="kw">n</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">p.temp</span> <span class="kw">=</span> <span class="fl">0.5</span>)
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span>(<span class="fu"><a href="../reference/hetu.html">hetu</a></span>(<span class="no">temp_sample</span>, <span class="kw">allow.temp</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">extract</span> <span class="kw">=</span> <span class="st">"is.temp"</span>))
<span class="co">#&gt; </span>
<span class="co">#&gt; FALSE  TRUE </span>
<span class="co">#&gt;     2     2</span></pre></body></html></div>
</div>
<div id="diagnostics" class="section level2">
<h2 class="hasAnchor">
<a href="#diagnostics" class="anchor"></a>Diagnostics</h2>
<p>In addition to information mentioned in the section <a href="#extracting-specific-information">Extracting specific information</a>, the user can choose to print additional columns containing information about checks done on PINs. The diagnostic checks produce a TRUE or FALSE for the following categories: <em>invalid.personal.number</em>, <em>invalid.checksum</em>, <em>incorrect.checksum</em>, <em>invalid.date</em>, <em>invalid.day</em>, <em>invalid.month</em>, <em>invalid.length</em> and <em>invalid.century</em>. TRUE means that a problem exists.</p>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="no">diagnosis_example</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"010101-0102"</span>, <span class="st">"111111-111Q"</span>,
<span class="st">"010101B0101"</span>, <span class="st">"320101-0101"</span>, <span class="st">"011301-0101"</span>,
<span class="st">"010101-01010"</span>, <span class="st">"010101-0011"</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fu"><a href="../reference/hetu.html">hetu</a></span>(<span class="no">diagnosis_example</span>, <span class="kw">diagnostic</span> <span class="kw">=</span> <span class="fl">TRUE</span>), <span class="fl">3</span>)
<span class="co">#&gt;          hetu    sex personal.number checksum       date day month year century</span>
<span class="co">#&gt; 1 010101-0102 Female             010        2 1901-01-01   1     1 1901       -</span>
<span class="co">#&gt; 2 111111-111Q   Male             111        Q 1911-11-11  11    11 1911       -</span>
<span class="co">#&gt; 3 010101B0101 Female             010        1 1901-01-01   1     1 1901       B</span>
<span class="co">#&gt;   is.temp invalid.personal.number invalid.checksum incorrect.checksum</span>
<span class="co">#&gt; 1   FALSE                   FALSE            FALSE               TRUE</span>
<span class="co">#&gt; 2   FALSE                   FALSE             TRUE               TRUE</span>
<span class="co">#&gt; 3   FALSE                   FALSE            FALSE              FALSE</span>
<span class="co">#&gt;   invalid.date invalid.day invalid.month invalid.length invalid.century</span>
<span class="co">#&gt; 1        FALSE       FALSE         FALSE          FALSE           FALSE</span>
<span class="co">#&gt; 2        FALSE       FALSE         FALSE          FALSE           FALSE</span>
<span class="co">#&gt; 3        FALSE       FALSE         FALSE          FALSE            TRUE</span></pre></body></html></div>
<p>Diagnostic information can be examined more closely by using subset or by using a separate hetu_diagnostics function. The user can print all diagnostic information for all PINs in the dataset:</p>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fu"><a href="../reference/hetu_diagnostic.html">hetu_diagnostic</a></span>(<span class="no">diagnosis_example</span>), <span class="fl">3</span>)
<span class="co">#&gt; Error in hetu_diagnostic(diagnosis_example): object 'show.warnings' not found</span></pre></body></html></div>
<p>By using extract, the user can limit the printed columns to only those which have TRUE values.</p>
<div class="sourceCode" id="cb23"><html><body><pre class="r"><span class="fu"><a href="../reference/hetu_diagnostic.html">hetu_diagnostic</a></span>(<span class="no">diagnosis_example</span>, <span class="kw">extract</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"invalid.century"</span>, <span class="st">"incorrect.checksum"</span>))
<span class="co">#&gt; Error in hetu_diagnostic(diagnosis_example, extract = c("invalid.century", : object 'show.warnings' not found</span></pre></body></html></div>
<p>When subsetting is set to TRUE, the function prints only rows with TRUE value in the extracted test.</p>
<div class="sourceCode" id="cb24"><html><body><pre class="r"><span class="fu"><a href="../reference/hetu_diagnostic.html">hetu_diagnostic</a></span>(<span class="no">diagnosis_example</span>, <span class="kw">subsetting</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">extract</span> <span class="kw">=</span> <span class="st">"invalid.century"</span>)
<span class="co">#&gt; Error in hetu_diagnostic(diagnosis_example, subsetting = TRUE, extract = "invalid.century"): object 'show.warnings' not found</span></pre></body></html></div>
</div>
<div id="various-examples" class="section level2">
<h2 class="hasAnchor">
<a href="#various-examples" class="anchor"></a>Various examples</h2>
<p>A simple example on how to use hetu package in tidyverse/dplyr manner to extract information to tibble format.</p>
<div class="sourceCode" id="cb25"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">hetu</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)

<span class="co"># Generate data for this example</span>
<span class="no">hdat</span><span class="kw">&lt;-</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">tibble</a></span>(<span class="kw">pin</span><span class="kw">=</span><span class="fu"><a href="../reference/rpin.html">rpin</a></span>(<span class="kw">n</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">start_date</span> <span class="kw">=</span> <span class="st">"1990-01-01"</span>, <span class="kw">end_date</span> <span class="kw">=</span> <span class="st">"2005-01-01"</span>))

<span class="co"># Extract all the hetu information to tibble format</span>
<span class="no">hdat</span><span class="kw">&lt;-</span><span class="no">hdat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">result</span><span class="kw">=</span><span class="fu">map</span>(<span class="kw">.x</span><span class="kw">=</span><span class="no">pin</span>,<span class="kw">.f</span><span class="kw">=</span><span class="kw pkg">hetu</span><span class="kw ns">::</span><span class="no"><a href="../reference/hetu.html">hetu</a></span>)) <span class="kw">%&gt;%</span> <span class="fu">unnest</span>(<span class="kw">cols</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">result</span>))
<span class="no">hdat</span></pre></body></html></div>
</div>
<div id="licensing-and-citations" class="section level2">
<h2 class="hasAnchor">
<a href="#licensing-and-citations" class="anchor"></a>Licensing and Citations</h2>
<p>This work can be freely used, modified and distributed under the open license specified in the <a href="https://github.com/MansMeg/hetu/blob/master/DESCRIPTION">DESCRIPTION file</a>.</p>
<p>Kindly cite the work as follows</p>
<div class="sourceCode" id="cb26"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span>(<span class="st">"hetu"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; Kindly cite the hetu R package as follows:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   (C) Pyry Kantanen, Mans Magnusson, Jussi Paananen and Leo Lahti</span>
<span class="co">#&gt;   (rOpenGov 2020).  hetu: Finnish personal ID number data toolkit for</span>
<span class="co">#&gt;   R.  URL: http://github.com/rOpenGov/hetu</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; A BibTeX entry for LaTeX users is</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   @Misc{,</span>
<span class="co">#&gt;     title = {hetu: Finnish personal ID number data toolkit for R},</span>
<span class="co">#&gt;     author = {Pyry Kantanen and Mans Magnusson and Jussi Paananen and Leo Lahti},</span>
<span class="co">#&gt;     year = {2020},</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Many thanks for all contributors!</span></pre></body></html></div>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<ul>
<li>
<a href="https://dvv.fi/en/personal-identity-code">The personal identity code</a>. Digital and population data services agency.</li>
<li>
<a href="https://www.finlex.fi/fi/laki/ajantasa/2010/20100128">Valtioneuvoston asetus väestötietojärjestelmästä (128/2010)</a>. Valtiovarainministeriö.</li>
<li>
<a href="http://urn.fi/URN:ISBN:978-952-367-296-3">HETU-uudistuksen loppuraportti</a>. Valtiovarainministeriön julkaisuja 2020:20.</li>
</ul>
</div>
<div id="session-info" class="section level2">
<h2 class="hasAnchor">
<a href="#session-info" class="anchor"></a>Session info</h2>
<p>This vignette was created with</p>
<div class="sourceCode" id="cb27"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo</a></span>()
<span class="co">#&gt; R version 4.0.2 (2020-06-22)</span>
<span class="co">#&gt; Platform: x86_64-apple-darwin17.0 (64-bit)</span>
<span class="co">#&gt; Running under: macOS Mojave 10.14.6</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Matrix products: default</span>
<span class="co">#&gt; BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib</span>
<span class="co">#&gt; LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; locale:</span>
<span class="co">#&gt; [1] fi_FI.UTF-8/fi_FI.UTF-8/fi_FI.UTF-8/C/fi_FI.UTF-8/fi_FI.UTF-8</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attached base packages:</span>
<span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; other attached packages:</span>
<span class="co">#&gt; [1] hetu_0.2.4</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; loaded via a namespace (and not attached):</span>
<span class="co">#&gt;  [1] Rcpp_1.0.5       rstudioapi_0.11  knitr_1.29       magrittr_1.5    </span>
<span class="co">#&gt;  [5] MASS_7.3-51.6    tidyselect_1.1.0 R6_2.4.1         rlang_0.4.7     </span>
<span class="co">#&gt;  [9] dplyr_1.0.2      stringr_1.4.0    highr_0.8        tools_4.0.2     </span>
<span class="co">#&gt; [13] checkmate_2.0.0  xfun_0.16        ellipsis_0.3.1   htmltools_0.5.0 </span>
<span class="co">#&gt; [17] yaml_2.2.1       assertthat_0.2.1 digest_0.6.25    rprojroot_1.3-2 </span>
<span class="co">#&gt; [21] tibble_3.0.3     lifecycle_0.2.0  pkgdown_1.5.1    crayon_1.3.4    </span>
<span class="co">#&gt; [25] purrr_0.3.4      vctrs_0.3.4      fs_1.5.0         glue_1.4.2      </span>
<span class="co">#&gt; [29] memoise_1.1.0    evaluate_0.14    rmarkdown_2.3    stringi_1.4.6   </span>
<span class="co">#&gt; [33] pillar_1.4.6     compiler_4.0.2   desc_1.2.0       generics_0.0.2  </span>
<span class="co">#&gt; [37] backports_1.1.9  lubridate_1.7.9  pkgconfig_2.0.3</span></pre></body></html></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Pyry Kantanen, Mans Magnusson, Jussi Paananen, Leo Lahti.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
